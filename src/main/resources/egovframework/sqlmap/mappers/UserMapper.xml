<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.logitics_track_360.user.dao.UserMapper">
  <insert id="insertUser" parameterType="kr.co.logitics_track_360.user.dto.JoinRequestDto">
    INSERT INTO TBL_USER (
        USER_ID, 
        PASSWORD, 
        NAME,
        ROLE,
        EMAIL,
        PHONE,
        CREATED_AT
    ) VALUES (
        #{userId}, 
        #{password}, 
        #{name},
        #{role},
        #{email},
        #{phone},
        CURRENT_TIMESTAMP
    )
  </insert>

  <select id="selectBy" parameterType="map" resultType="kr.co.logitics_track_360.user.vo.UserVO">
    SELECT USER_ID as userId, 
           PASSWORD, 
           NAME,
           ROLE,
           EMAIL,
           PHONE
    FROM TBL_USER
    <where>
      <if test="userId != null">
        AND USER_ID = #{userId}
      </if>
      <if test="email != null">
        AND EMAIL = #{email}
      </if>
    </where>
  </select>
</mapper>